<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Atl√¢ntico Golf ‚Äî Quadro Kanban (Distribui√ß√£o 19/09)</title>
  <meta name="description" content="Kanban por encarregado + Suprimentos. T√≠tulos fixos (header e cabe√ßalhos de coluna) e rolagem independente por coluna. C√≥digos √∫nicos por processo. Somente visualiza√ß√£o." />
  <style>
    :root{
      --bg:#f5f7fb; --text:#111827; --muted:#475569; --brand:#005b96;
      --card:#ffffff; --border:#cbd5e1; --header:#f1f5f9;
      --ok:#16a34a; --warn:#ca8a04; --late:#b91c1c; --block:#9333ea; --exec:#0ea5e9; --recv:#15803d;
      --chip:#e2e8f0; --mono:#0f172a;
      --header-h: 96px; /* ajustado dinamicamente no JS */
      --footer-h: 48px; /* ajustado dinamicamente no JS */
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Arial,sans-serif;background:var(--bg);color:var(--text)}

    /* ===== Header fixo (congelado) ===== */
    header{position:sticky;top:0;z-index:100;background:var(--brand);color:#fff;display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;padding:12px 16px;box-shadow:0 2px 10px rgba(0,0,0,.18)}
    .brand{display:flex;align-items:center;gap:14px}
    .logo-box{width:160px;height:64px;background:#fff;border-radius:10px;border:2px solid rgba(255,255,255,.25);display:flex;align-items:center;justify-content:center;overflow:hidden}
    .logo-img{max-width:100%;max-height:100%;display:none}
    .logo-ph{width:100%;height:100%;display:flex;align-items:center;justify-content:center;color:#0f172a;font-weight:800;letter-spacing:.3px}
    h1{margin:0;font-size:22px}
    .clock{font-variant-numeric:tabular-nums}
    .small{font-size:12px;opacity:.95}

    /* ===== Painel e colunas ===== */
    .board{height:calc(100vh - var(--header-h) - var(--footer-h));display:flex;gap:16px;padding:16px;overflow-x:auto;overflow-y:hidden;scrollbar-gutter:stable both-edges}
    .column{background:var(--card);border:1px solid var(--border);border-radius:10px;min-width:320px;max-width:480px;flex:1;display:flex;flex-direction:column;height:100%;overflow:hidden}
    /* Cabe√ßalho da coluna fixo dentro da pr√≥pria coluna */
    .column h2{position:sticky;top:0;z-index:10;margin:0;padding:12px;background:var(--header);font-size:18px;font-weight:800;text-decoration:underline;border-bottom:1px solid var(--border);text-align:center;box-shadow:0 1px 0 rgba(0,0,0,.06)}
    /* √Årea rol√°vel por coluna */
    .list{flex:1;overflow:auto;padding:10px;overscroll-behavior:contain}

    .task{background:#ffffff;margin:8px 0;border:1px solid var(--border);border-left:10px solid var(--border);border-radius:10px;padding:12px;box-shadow:0 2px 6px rgba(2,6,23,.06);position:relative;transition:transform .18s ease, box-shadow .18s ease}
    .task.overdue{border-left-color:var(--late);animation:blink 1.6s ease-in-out infinite, jitter .6s linear infinite;transform:scale(1.02);box-shadow:0 6px 16px rgba(185,28,28,.18)}
    .task.block{border-left-color:var(--block)}
    .task.exec{border-left-color:var(--exec)}
    .task.done{border-left-color:var(--ok)}
    .title{font-weight:800;margin-bottom:6px}
    .meta{font-size:13px;color:var(--muted)}
    .chip{display:inline-block;background:var(--chip);padding:2px 8px;border-radius:999px;font-size:12px;font-weight:700;margin-left:6px}
    .code{display:inline-block;font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,monospace;font-size:12px;background:#eef2ff;color:var(--mono);border:1px solid #c7d2fe;padding:2px 6px;border-radius:6px;margin-right:6px}

    .section{margin-top:6px;padding-top:6px;border-top:1px dashed var(--border)}
    .section h3{position:sticky;top:0;z-index:6;margin:0 0 6px;background:var(--header);padding:8px;border:1px solid var(--border);border-radius:8px;text-align:center;font-size:14px}
    .item{background:#ffffff;border:1px solid var(--border);border-left:8px solid var(--border);border-radius:10px;padding:10px;margin:8px 0;box-shadow:0 2px 6px rgba(2,6,23,.06);position:relative;transition:transform .18s ease, box-shadow .18s ease}
    .item.overdue{border-left-color:var(--late);transform:scale(1.02);box-shadow:0 6px 16px rgba(185,28,28,.18)}
    .item.soon{border-left-color:var(--warn)}
    .item.ok{border-left-color:var(--ok)}
    .item.recv{border-left-color:var(--recv)}
    .row{display:flex;justify-content:space-between;gap:8px;font-size:14px}
    .kv{font-size:12px;color:var(--muted)}

    footer{padding:10px 16px;border-top:1px solid var(--border);background:#fff;color:#334155;display:flex;justify-content:space-between;gap:12px;flex-wrap:wrap}

    @keyframes blink{0%{opacity:1}50%{opacity:.45}100%{opacity:1}}
    @keyframes jitter{0%,100%{transform:translateX(0)}25%{transform:translateX(1px)}75%{transform:translateX(-1px)}}
  </style>
</head>
<body>
  <header id="hdr">
    <div class="brand">
      <div class="logo-box"><img id="logo" class="logo-img" alt="Logo System Engenharia" /><div id="logoPh" class="logo-ph">LOGO</div></div>
      <div>
        <h1>Atl√¢ntico Golf ‚Äî Quadro Kanban (Distribui√ß√£o 19/09)</h1>
        <div class="small">Planejamento de campo consolidado para 19/09 ‚Äî tarefas priorizadas por urg√™ncia e conclus√£o.</div>
      </div>
    </div>
    <div style="text-align:right">
      <div class="clock" id="clock">--:--:--</div>
      <div class="small" id="stamp">√öltima atualiza√ß√£o: --/--/----</div>
    </div>
  </header>

  <div class="board" id="board"></div>

  <footer id="ftr">
    <div>Requisi√ß√µes e OCs atualizadas. Compradores registrados: <strong>Suellen</strong>, <strong>Lucas</strong>, <strong>Br√≠gida</strong>.</div>
    <div>Arquivo gerado a partir do modelo oficial do projeto (somente visualiza√ß√£o).</div>
  </footer>

  <script>
  (function(){
    'use strict';

    /* =================== DADOS =================== */
    var DATA = {
      logo_src: 'assets/logo.jpg',
      encarregados:[
        {nome:'Severo (Hidr√°ulica)', tarefas:[
          {codigo:'T-0313', titulo:'Rede hidr√°ulica de entrada de √°gua ‚Äî conclus√£o', prazo:'19/09/2025', status:'exec'},
          {codigo:'T-0314', titulo:'Troca do suporte da rede √ò110 mm: perfilado ‚Üí cantoneira (recalque de pluviais e esgoto)', prazo:'19/09/2025', status:'exec'}
        ]},
        {nome:'Ayrton (Hidr√°ulica)', tarefas:[
          {codigo:'T-0305', titulo:'Entrega de apartamentos para a Qualidade ‚Äî Blocos 2 e 3', prazo:'19/09/2025', status:'exec'},
          {codigo:'T-0306', titulo:'Instala√ß√£o da redutora de press√£o ‚Äî Bloco 3', prazo:'19/09/2025', status:'exec'}
        ]},
        {nome:'Thiago (El√©trica)', tarefas:[
          {codigo:'T-0315', titulo:'Tratamento de todas as eletrocalhas', prazo:'19/09/2025', status:'exec'},
          {codigo:'T-0316', titulo:'Instala√ß√£o de lumin√°rias ‚Äî trecho central do subsolo (¬±50 unidades em zonas apagadas)', prazo:'19/09/2025', status:'exec'},
          {codigo:'T-0317', titulo:'Instala√ß√£o de 5 quadros de bombas', prazo:'19/09/2025', status:'exec'}
        ]},
        {nome:'Marcelo (El√©trica)', tarefas:[
          {codigo:'T-0318', titulo:'Entrega de apartamentos', prazo:'19/09/2025', status:'exec'},
          {codigo:'T-0319', titulo:'Fechamento de QDLs dos apartamentos ‚Äî 19¬∫ e 20¬∫ (duas torres)', prazo:'19/09/2025', status:'exec'},
          {codigo:'T-0320', titulo:'SPDA das duas torres (executar √°reas liberadas)', prazo:'19/09/2025', status:'exec'}
        ]}
      ],
      suprimentos:{
        compradores:['Suellen','Lucas','Br√≠gida'],
        requisicoes:[
          {codigo:'RQ-11181', numero:'RQ-11181', responsavel:'Suellen', contrato:'Atl√¢ntico', material:'PVC', aplicacao:'Ralos embasamento / fechamento de bombas de pressuriza√ß√£o e recalque', data:'07/08/2025', prazo:'18/08/2025', status:'Em cota√ß√£o', obs:'Cota√ß√£o', obs_comprador:'Negociando com fornecedor'},
          {codigo:'RQ-11186', numero:'RQ-11186', responsavel:'Suellen', contrato:'Atl√¢ntico', material:'600 conectores gen√©ricos', aplicacao:'Fechamento de QDLs APTs', data:'07/08/2025', prazo:'15/08/2025', status:'', obs:'Parcial ‚Äî 460 vieram do escrit√≥rio', obs_comprador:''},
          {codigo:'RQ-11184', numero:'RQ-11184', responsavel:'Murilo', contrato:'Atl√¢ntico', material:'Estopa, l√°pis, brocas', aplicacao:'Uso e consumo geral de obra', data:'07/08/2025', prazo:'15/08/2025', status:'', obs:'Parcial ‚Äî Fertak', obs_comprador:''},
          {codigo:'RQ-11203', numero:'RQ-11203', responsavel:'Lucas', contrato:'Atl√¢ntico', material:'Zarc√£o cinza', aplicacao:'Tratamento de fixa√ß√µes', data:'', prazo:'13/08/2025', status:'', obs:'Faturamento System', obs_comprador:''},
          {codigo:'RQ-11221', numero:'RQ-11221', responsavel:'Suellen', contrato:'Atl√¢ntico', material:'PVC', aplicacao:'Pontos de pia e tanque dos APTs', data:'', prazo:'25/08/2025', status:'', obs:'Aguardar defini√ß√£o diretoria / Ver estoques', obs_comprador:'Negociando com fornecedor'},
          {codigo:'RQ-11238', numero:'RQ-11238', responsavel:'Lucas', contrato:'Atl√¢ntico', material:'PVC e ralo abacaxi', aplicacao:'Distribui√ß√£o hidr√°ulica t√©rreo', data:'', prazo:'22/08/2025', status:'Em cota√ß√£o', obs:'', obs_comprador:'Negociando com fornecedor'},
          {codigo:'RQ-11287', numero:'RQ-11287', responsavel:'Suellen', contrato:'Atl√¢ntico', material:'Saco de r√°fia', aplicacao:'Arruma√ß√£o', data:'27/08/2025', prazo:'01/09/2025', status:'Em cota√ß√£o', obs:'', obs_comprador:''},
          {codigo:'RQ-11291', numero:'RQ-11291', responsavel:'Lucas', contrato:'Atl√¢ntico', material:'Interruptores e tomadas', aplicacao:'√Åreas comuns, t√©rreo, subsolo, escadas, coberturas e extravios', data:'27/08/2025', prazo:'08/09/2025', status:'Em cota√ß√£o', obs:'', obs_comprador:''},
          {codigo:'RQ-11294', numero:'RQ-11294', responsavel:'Lucas', contrato:'Atl√¢ntico', material:'Lumin√°rias (modelo a definir)', aplicacao:'Escadas e √°reas t√©cnicas', data:'27/08/2025', prazo:'15/09/2025', status:'Em cota√ß√£o', obs:'Modelo mais econ√¥mico p/ valida√ß√£o (tartaruga LED)', obs_comprador:''},
          {codigo:'RQ-11309', numero:'RQ-11309', responsavel:'Suellen', contrato:'Atl√¢ntico', material:'Parafuso bicromatizado e comum', aplicacao:'SPDA e uso geral', data:'', prazo:'12/09/2025', status:'', obs:'Ver observa√ß√µes do item', obs_comprador:''}
        ],
        ocs:[
          {codigo:'OC-574', numero:'OC-574', emissao:'', fornecedor:'Cobrecom', status:'OC enviada ao fornecedor', previsao:'25/08/2025', comprador:'Br√≠gida', recebido:'', origem_rq:'RQ-11202', material:'Cabos de cobre', aplicacao:'Alimentadores para bombas de po√ßos'},
          {codigo:'OC-580', numero:'OC-580', emissao:'', fornecedor:'MC Tubos', status:'EMITIDA', previsao:'25/08/2025', comprador:'Suellen', recebido:'', origem_rq:'RQ-11219', material:'Eletrodutos', aplicacao:'Infra el√©trica e especiais de for√ßa'},
          {codigo:'OC-582', numero:'OC-582', emissao:'', fornecedor:'Perfil L√≠der', status:'EMITIDA', previsao:'25/08/2025', comprador:'Br√≠gida', recebido:'', origem_rq:'RQ-11218 / RQ-11235', material:'Eletrocalhas / Perfilados', aplicacao:'Sistemas especiais / Fixa√ß√µes e ilumina√ß√£o subsolo'},
          {codigo:'OC-585', numero:'OC-585', emissao:'', fornecedor:'Lukma', status:'EMITIDA', previsao:'22/08/2025', comprador:'Lucas', recebido:'', origem_rq:'RQ-11237', material:'Fita isolante', aplicacao:'El√©trica for√ßa e distribui√ß√£o'},
          {codigo:'OC-588', numero:'OC-588', emissao:'27/08/2025', fornecedor:'Mosal', status:'EMITIDA', previsao:'02/09/2025', comprador:'Lucas', recebido:'', origem_rq:'RQ-11282', material:'T√™ de fachada, pintura e aros', aplicacao:'Complemento'},
          {codigo:'OC-589', numero:'OC-589', emissao:'', fornecedor:'WCT 2010', status:'OC enviada ao cliente', previsao:'22/08/2025', comprador:'Br√≠gida', recebido:'', origem_rq:'RQ-11236', material:'Abra√ßadeiras e conduletes', aplicacao:'Ilumina√ß√£o subsolo / alimenta√ß√£o quadros / ilumina√ß√£o externa', obs_comprador:'ENTREGA AT√â 05/09/2025'}
        ]
      }
    };

    /* =================== UTIL DE DATAS =================== */
    var DAY = 86400000, HOUR = 36e5;
    function parseBRDate(s){ if(!s) return null; var a=s.split('/'); if(a.length!==3) return null; var d=+a[0], m=+a[1], y=+a[2]; var dt=new Date(y, m-1, d, 12, 0, 0); return isNaN(dt)?null:dt; }
    function diffDays(a,b){ return Math.round((a-b)/DAY); }
    function fmtClock(){ var t=new Date(); var pad=n=>String(n).padStart(2,'0'); return pad(t.getHours())+':'+pad(t.getMinutes())+':'+pad(t.getSeconds()); }
    function dLabel(dateStr){ var d=parseBRDate(dateStr); if(!d) return ''; var delta = Math.floor((d - new Date())/DAY); if(delta===0) return 'D-0'; return (delta>0)?('D-'+delta):('D+'+Math.abs(delta)); }
    function urgencyByDate(dateStr, status){
      if(status==='done' || status==='FINALIZADA') return 'done';
      if(status==='block') return 'block';
      if(status==='exec') return 'exec';
      if(status==='recebido') return 'recv';
      var d=parseBRDate(dateStr); if(!d) return 'ok';
      var hours=(d - new Date())/HOUR;
      if(hours<=0) return 'overdue';
      if(hours<=48) return 'soon';
      return 'ok';
    }

    /* ===== Ordena√ß√£o ===== */
    function weightStatus(status){ if(status==='done' || status==='FINALIZADA') return -2; return 0; }
    function weightUrgencyByDate(dateStr){ var d=parseBRDate(dateStr); if(!d) return 3; var hours=(d - new Date())/HOUR; if(hours<=0) return 0; if(hours<=48) return 1; return 2; }
    function compareByPrazo(a,b){
      var wa = weightStatus(a.status), wb = weightStatus(b.status);
      if(wa!==wb) return wa - wb;
      if((a.status==='done'||a.status==='FINALIZADA') && (b.status==='done'||b.status==='FINALIZADA')){
        var da=parseBRDate(a.finalizado_em||a.prazo||''), db=parseBRDate(b.finalizado_em||b.prazo||'');
        if(da && db) return db - da; if(da && !db) return -1; if(!da && db) return 1; return 0;
      }
      var ua = weightUrgencyByDate(a.prazo||a.previsao||a.data||'');
      var ub = weightUrgencyByDate(b.prazo||b.previsao||b.data||'');
      if(ua!==ub) return ua - ub;
      var da2=parseBRDate(a.prazo||a.previsao||a.data||'');
      var db2=parseBRDate(b.prazo||b.previsao||b.data||'');
      if(da2 && db2) return da2 - db2; if(da2 && !db2) return -1; if(!da2 && db2) return 1; return 0;
    }
    function compareOC(a,b){
      var ar = !!a.recebido, br = !!b.recebido;
      if(ar!==br) return br - ar;
      if(ar && br){ var da=parseBRDate(a.recebido), db=parseBRDate(b.recebido); if(da && db) return db - da; if(da && !db) return -1; if(!da && db) return 1; return 0; }
      return compareByPrazo({status:a.status, prazo:a.previsao},{status:b.status, prazo:b.previsao});
    }

    /* =================== DOM =================== */
    function el(tag, cls, text){ var e=document.createElement(tag); if(cls) e.className=cls; if(text!=null) e.textContent=text; return e; }
    var boardEl = document.getElementById('board');

    function render(){
      boardEl.innerHTML = '';

      // === Colunas por Encarregado ===
      for(var i=0;i<DATA.encarregados.length;i++){
        var enc = DATA.encarregados[i];
        var tasks = (enc.tarefas||[]).slice().sort(compareByPrazo);

        var col = el('section','column');
        col.appendChild(el('h2','',enc.nome));
        var list = el('div','list');

        for(var j=0;j<tasks.length;j++){
          var t = tasks[j];
          var cls = urgencyByDate(t.prazo, t.status);
          var card = el('div','task '+cls);

          var code = el('span','code', '#'+(t.codigo||''));
          var title = el('span','title'); title.textContent = t.titulo;

          var header = el('div'); header.appendChild(code); header.appendChild(title);

          var meta = el('div','meta');
          var linha = [];
          if(t.status==='done' || t.status==='FINALIZADA'){
            linha.push(t.finalizado_em ? ('Conclu√≠do: '+t.finalizado_em) : ('Prazo: '+(t.prazo||'-')));
          }else{
            linha.push('Prazo: '+(t.prazo||'-')+' ‚Ä¢ '+dLabel(t.prazo||''));
          }
          meta.textContent = linha.join(' ');

          var statusLabel = 'Pendente';
          if(t.status==='exec') statusLabel='Em execu√ß√£o';
          else if(t.status==='block') statusLabel='Bloqueada';
          else if(t.status==='done' || t.status==='FINALIZADA') statusLabel='Finalizada üèÜ';
          else if(cls==='overdue') statusLabel='Atrasada';
          var chip = el('span','chip',statusLabel);

          card.appendChild(header);
          card.appendChild(meta);
          meta.appendChild(chip);
          list.appendChild(card);
        }

        col.appendChild(list);
        boardEl.appendChild(col);
      }

      // === Coluna Suprimentos ===
      var sup = el('section','column');
      sup.appendChild(el('h2','','Suprimentos'));
      var sList = el('div','list');

      // Requisi√ß√µes
      var rqSec = el('div','section');
      rqSec.appendChild(el('h3','', 'Requisi√ß√µes em Aberto'));
      var rqs = (DATA.suprimentos.requisicoes||[]).slice().sort(function(a,b){
        return compareByPrazo(
          {status:a.status, prazo:a.prazo, finalizado_em:a.finalizado_em},
          {status:b.status, prazo:b.prazo, finalizado_em:b.finalizado_em}
        );
      });
      for(var r=0;r<rqs.length;r++){
        var rq = rqs[r];
        var dtPrazo = parseBRDate(rq.prazo); var dtData = parseBRDate(rq.data);
        var ltEsperado = (dtPrazo && dtData) ? (diffDays(dtPrazo, dtData)+'d') : '-';
        var clsRq = urgencyByDate(rq.prazo, rq.status);
        var it = el('div','item '+clsRq);

        var rowTop = el('div','row');
        var left = el('div'); left.appendChild(el('span','code','#'+(rq.codigo||rq.numero||'')));
        left.appendChild(el('strong','', rq.numero || rq.codigo || 'RQ'));
        rowTop.appendChild(left);
        rowTop.appendChild(el('span','', rq.status||''));

        var kv1 = el('div','kv','Data: '+(rq.data||'-')+' ‚Ä¢ Prazo: '+(rq.prazo||'-')+' ‚Ä¢ Lead time esperado: '+ltEsperado);
        var kv2 = el('div','kv','Respons√°vel: '+(rq.responsavel||'-')+' ‚Ä¢ Contrato: '+(rq.contrato||'-')+' ‚Ä¢ Material: '+(rq.material||'-'));
        var kv3 = el('div','kv','Aplica√ß√£o: '+(rq.aplicacao||'-')+' ‚Ä¢ Obs.: '+(rq.obs||'-'));
        if(rq.obs_comprador){ var kv4 = el('div','kv','Obs. comprador: '+rq.obs_comprador); it.appendChild(kv4); }

        it.appendChild(rowTop); it.appendChild(kv1); it.appendChild(kv2); it.appendChild(kv3);
        rqSec.appendChild(it);
      }
      sList.appendChild(rqSec);

      // OCs
      var ocSec = el('div','section');
      ocSec.appendChild(el('h3','', 'Ordens de Compra (OC)'));
      var ocs = (DATA.suprimentos.ocs||[]).slice().sort(compareOC);
      for(var o=0;o<ocs.length;o++){
        var oc = ocs[o];
        var dtRec = parseBRDate(oc.recebido); var dtEmi = parseBRDate(oc.emissao);
        var ltReal = (dtRec && dtEmi) ? (diffDays(dtRec, dtEmi)+'d') : '-';
        var clsOc = oc.recebido ? 'recv' : urgencyByDate(oc.previsao, oc.status);
        var it2 = el('div','item '+clsOc);

        var rowTop2 = el('div','row');
        var left2 = el('div'); left2.appendChild(el('span','code','#'+(oc.codigo||oc.numero||'')));
        left2.appendChild(el('strong','', oc.numero || oc.codigo || 'OC'));
        rowTop2.appendChild(left2);
        rowTop2.appendChild(el('span','', oc.status||''));

        var kv3 = el('div','kv','Fornecedor: '+(oc.fornecedor||'-')+' ‚Ä¢ Comprador: '+(oc.comprador||'-')+' ‚Ä¢ Origem: '+(oc.origem_rq||'-'));
        var kv4 = el('div','kv','Material: '+(oc.material||'-')+' ‚Ä¢ Aplica√ß√£o: '+(oc.aplicacao||'-'));
        var kv5 = el('div','kv','Emiss√£o: '+(oc.emissao||'-')+' ‚Ä¢ Previs√£o: '+(oc.previsao||'-')+' ‚Ä¢ Lead time real: '+ltReal);
        if(oc.obs_comprador){ var kv6 = el('div','kv','Obs. comprador: '+oc.obs_comprador); it2.appendChild(kv6); }
        var st = el('div','kv', oc.recebido? ('Recebido em '+oc.recebido) : 'Pendente');

        it2.appendChild(rowTop2); it2.appendChild(kv3); it2.appendChild(kv4); it2.appendChild(kv5); it2.appendChild(st);
        ocSec.appendChild(it2);
      }
      sList.appendChild(ocSec);

      sup.appendChild(sList); boardEl.appendChild(sup);
    }

    /* =================== LOGO, REL√ìGIO E LAYOUT DIN√ÇMICO =================== */
    function initLogo(){
      var img = document.getElementById('logo');
      var ph  = document.getElementById('logoPh');
      var src = DATA.logo_src || '';
      if(!src){ img.style.display='none'; ph.style.display='flex'; return; }
      img.onload = function(){ img.style.display='block'; ph.style.display='none'; };
      img.onerror = function(){ img.style.display='none'; ph.style.display='flex'; };
      img.src = src;
    }
    function tick(){ document.getElementById('clock').textContent = fmtClock(); }

    // Ajusta dinamicamente as vari√°veis de altura do header/footer para a board ocupar o restante da viewport
    function recalcularAlturas(){
      var h = document.getElementById('hdr').offsetHeight || 96;
      var f = document.getElementById('ftr').offsetHeight || 48;
      document.documentElement.style.setProperty('--header-h', h + 'px');
      document.documentElement.style.setProperty('--footer-h', f + 'px');
    }

    /* =================== BOOT =================== */
    document.addEventListener('DOMContentLoaded', function(){
      initLogo();
      render();
      recalcularAlturas();
      document.getElementById('stamp').textContent = '√öltima atualiza√ß√£o: '+new Date().toLocaleDateString('pt-BR')+' '+new Date().toLocaleTimeString('pt-BR', {hour:'2-digit', minute:'2-digit'});
      setInterval(function(){ tick(); }, 1000);
      // Recalcula em resize/orienta√ß√£o para manter o congelamento perfeito
      window.addEventListener('resize', recalcularAlturas);
    });
  })();
  </script>
</body>
</html>

