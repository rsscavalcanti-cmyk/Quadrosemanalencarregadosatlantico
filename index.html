<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Atl√¢ntico Golf ‚Äî Quadro Kanban por Encarregado</title>
  <meta name="description" content="Kanban semanal por encarregado + coluna de Suprimentos (Requisi√ß√µes e OCs). Tema claro, pronto para TV/obras, com espa√ßo fixo para logo e status das tarefas." />
  <style>
    :root{
      --bg:#f5f7fb; --text:#111827; --muted:#475569; --brand:#005b96;
      --card:#ffffff; --border:#cbd5e1; --header:#f1f5f9;
      --ok:#16a34a; --warn:#ca8a04; --late:#b91c1c; --block:#9333ea; --exec:#0ea5e9;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Arial,sans-serif;background:var(--bg);color:var(--text)}

    header{padding:14px 16px;background:var(--brand);color:#fff;display:flex;justify-content:space-between;align-items:center}
    .brand{display:flex;align-items:center;gap:14px}

    .logo-box{width:140px;height:64px;background:#fff;border-radius:10px;border:2px solid rgba(255,255,255,.25);display:flex;align-items:center;justify-content:center;overflow:hidden}
    .logo-img{max-width:100%;max-height:100%;display:none}
    .logo-ph{width:100%;height:100%;display:flex;align-items:center;justify-content:center;color:#0f172a;font-weight:800;letter-spacing:.3px}

    h1{margin:0;font-size:24px}
    .clock{font-variant-numeric:tabular-nums}

    .board{display:flex;align-items:flex-start;gap:16px;padding:16px;overflow:auto;height:calc(100% - 92px)}
    .column{background:var(--card);border:1px solid var(--border);border-radius:10px;min-width:280px;max-width:420px;flex:1;display:flex;flex-direction:column}
    .column h2{margin:0;padding:14px;background:var(--header);font-size:18px;font-weight:800;text-decoration:underline;border-bottom:1px solid var(--border);text-align:center}

    .list{padding:10px}
    .task{background:#ffffff;margin:8px 0;border:1px solid var(--border);border-left:10px solid var(--border);border-radius:10px;padding:12px;box-shadow:0 2px 6px rgba(2,6,23,.06)}
    .task.overdue{border-left-color:var(--late);animation:blink 1.5s ease-in-out infinite}
    .task.block{border-left-color:var(--block)}
    .task.exec{border-left-color:var(--exec)}
    .task.done{border-left-color:var(--ok)}
    .title{font-weight:800;margin-bottom:6px}
    .meta{font-size:13px;color:var(--muted)}
    .date{font-weight:900;background:#fff7ed;border:1px solid rgba(124,45,18,.25);padding:1px 6px;border-radius:6px}
    .d{font-weight:700}
    .status{font-weight:700;display:inline-block;margin-top:4px}
    .trophy{font-size:16px;margin-left:6px}
    @keyframes blink{0%{opacity:1}50%{opacity:.45}100%{opacity:1}}

    .section{margin-top:6px;padding-top:6px;border-top:1px dashed var(--border)}
    .section h3{margin:8px 0 6px;font-size:14px;color:#0f172a;text-align:center}
    .item{background:#ffffff;border:1px solid var(--border);border-left:8px solid var(--border);border-radius:10px;padding:10px;margin:8px 0;box-shadow:0 2px 6px rgba(2,6,23,.06)}
    .item.overdue{border-left-color:var(--late);animation:blink 1.5s ease-in-out infinite}
    .item.soon{border-left-color:var(--warn)}
    .item.ok{border-left-color:var(--ok)}
    .row{display:flex;justify-content:space-between;gap:8px;font-size:14px}
    .kv{font-size:12px;color:var(--muted)}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <div class="logo-box">
        <img id="logo" class="logo-img" alt="Logo System Engenharia" />
        <div id="logoPh" class="logo-ph">LOGO</div>
      </div>
      <h1>Atl√¢ntico Golf ‚Äî Quadro Kanban (Semanal)</h1>
    </div>
    <div class="clock" id="clock">--:--:--</div>
  </header>

  <div class="board" id="board"></div>

  <script>
  (function(){
    'use strict';
    const DATA = {
      logo_src: 'assets/logo.jpg',
      encarregados:[
        {nome:"Severo (Hidr√°ulica)", tarefas:[
          {titulo:"Interligar barrilete Torre 1 ‚Äî Subsolo", prazo:"16/09/2025", status:"exec"},
          {titulo:"Teste estanqueidade prumada A ‚Äî Bloco 2", prazo:"17/09/2025", status:"block"}
        ]},
        {nome:"Ayrton (Hidr√°ulica)", tarefas:[
          {titulo:"Fixar suportes de reservat√≥rios ‚Äî √Årea T√©cnica", prazo:"15/09/2025", status:"done"},
          {titulo:"Montar barrilete superior ‚Äî Torre 3", prazo:"19/09/2025", status:"exec"}
        ]},
        {nome:"Thiago (El√©trica)", tarefas:[
          {titulo:"Lan√ßamento cabos QGBT‚ÜíQDLs ‚Äî Subsolo", prazo:"16/09/2025", status:"exec"},
          {titulo:"Fechamento alimentadores nos disjuntores gerais", prazo:"17/09/2025", status:"block"}
        ]},
        {nome:"Marcelo (El√©trica)", tarefas:[
          {titulo:"Revis√£o SPDA ‚Äî Cobertura Bloco 2", prazo:"15/09/2025", status:"done"},
          {titulo:"Checklist ilumina√ß√£o emerg√™ncia ‚Äî T√©rreo", prazo:"18/09/2025", status:"exec"}
        ]}
      ],
      suprimentos:{
        requisicoes:[
          {numero:"RQ-241", data:"12/09/2025", solicitante:"Thiago", area:"Subsolo", status:"EM AN√ÅLISE", obs:"Eletrocalhas 100mm", prazo:"18/09/2025"},
          {numero:"RQ-256", data:"13/09/2025", solicitante:"Severo", area:"Hidr√°ulica", status:"APROVADA", obs:"Conex√µes PPR √ò75", prazo:"20/09/2025"}
        ],
        ocs:[
          {numero:"OC-1189", fornecedor:"Prysmian", status:"EMITIDA", previsao:"18/09/2025", comprador:"Carla"},
          {numero:"OC-1197", fornecedor:"Megabarre", status:"AGUARDANDO NF", previsao:"25/09/2025", comprador:"Eduardo"}
        ]
      }
    };

    const HOUR = 36e5, DAY = 86400000;
    function now(){return new Date();}
    function parseBRDate(s){ if(!s) return null; const [d,m,y] = s.split('/').map(Number); return new Date(y, m-1, d, 17, 0, 0); }
    function diffHours(a,b){return (a - b) / HOUR;}
    function fmtClock(){ const t = now(); const pad=n=>String(n).padStart(2,'0'); return `${pad(t.getHours())}:${pad(t.getMinutes())}:${pad(t.getSeconds())}`; }
    function urgencyByDate(dateStr, status){
      if(status === 'done') return 'done';
      if(status === 'block') return 'block';
      if(status === 'exec') return 'exec';
      const d = parseBRDate(dateStr);
      if(!d) return 'ok';
      const dh = diffHours(d, now());
      if(dh <= 0) return 'overdue';
      if(dh <= 48) return 'soon';
      return 'ok';
    }
    function dLabel(dateStr){ const d = parseBRDate(dateStr); if(!d) return ''; const delta = Math.floor((d - new Date())/DAY); if(delta === 0) return 'D-0'; return delta>0? `D-${delta}` : `D+${Math.abs(delta)}`; }

    function renderBoard(){
      const board = document.getElementById('board');
      board.innerHTML = '';
      DATA.encarregados.forEach(enc => {
        const col = document.createElement('section'); col.className = 'column';
        const h2 = document.createElement('h2'); h2.textContent = enc.nome; col.appendChild(h2);
        const list = document.createElement('div'); list.className = 'list';
        (enc.tarefas||[]).forEach(t => {
          const cls = urgencyByDate(t.prazo, t.status);
          const statusLabel = t.status === 'exec' ? 'Em execu√ß√£o' : t.status === 'block' ? 'Bloqueada' : t.status === 'done' ? 'Finalizada' : (cls === 'overdue' ? 'Atrasada' : 'Pendente');
          const trophy = t.status === 'done' ? ' üèÜ' : '';
          const card = document.createElement('div'); card.className = `task ${cls}`;
          card.innerHTML = `<div class="title">${t.titulo}</div>
                            <div class="meta">Prazo: <span class="date">${t.prazo||'-'}</span> ‚Ä¢ <span class="d">${dLabel(t.prazo)}</span></div>
                            <div class="status">${statusLabel}${trophy}</div>`;
          list.appendChild(card);
        });
        col.appendChild(list); board.appendChild(col);
      });

      const sup = document.createElement('section'); sup.className = 'column'; sup.innerHTML = `<h2>Suprimentos</h2>`;
      const sList = document.createElement('div'); sList.className = 'list';
      const rqSec = document.createElement('div'); rqSec.className = 'section'; rqSec.innerHTML = '<h3>Requisi√ß√µes em Aberto</h3>';
      (DATA.suprimentos.requisicoes||[]).forEach(rq => {
        const it = document.createElement('div'); it.className = 'item';
        it.innerHTML = `<div class="row"><strong>${rq.numero}</strong><span>${rq.status||''}</span></div>
                        <div class="kv">Data: <span class="date">${rq.data||'-'}</span> ‚Ä¢ Prazo: <span class="date">${rq.prazo||'-'}</span></div>
                        <div class="kv">Solicitante: ${rq.solicitante||'-'} ‚Ä¢ √Årea: ${rq.area||'-'}</div>
                        <div class="kv">Obs.: ${rq.obs||'-'}</div>`;
        rqSec.appendChild(it);
      });
      sList.appendChild(rqSec);
      const ocSec = document.createElement('div'); ocSec.className = 'section'; ocSec.innerHTML = '<h3>Ordens de Compra (OC)</h3>';
      (DATA.suprimentos.ocs||[]).forEach(oc => {
        const it = document.createElement('div'); it.className = 'item';
        it.innerHTML = `<div class="row"><strong>${oc.numero}</strong><span>${oc.status||''}</span></div>
                        <div class="kv">Fornecedor: ${oc.fornecedor||'-'}</div>
                        <div class="kv">Previs√£o: <span class="date">${oc.previsao||'-'}</span> ‚Ä¢ Comprador: <b>${oc.comprador||'-'}</b></div>`;
        ocSec.appendChild(it);
      });
      sList.appendChild(ocSec);
      sup.appendChild(sList); board.appendChild(sup);
    }

    function initLogo(){
      const img = document.getElementById('logo');
      const ph  = document.getElementById('logoPh');
      const src = DATA.logo_src || '';
      if(!src){ img.style.display='none'; ph.style.display='flex'; return; }
      img.onload = ()=>{ img.style.display='block'; ph.style.display='none'; };
      img.onerror = ()=>{ img.style.display='none'; ph.style.display='flex'; };
      img.src = src;
    }

    function tick(){ document.getElementById('clock').textContent = fmtClock(); renderBoard(); }

    document.addEventListener('DOMContentLoaded', function(){
      initLogo();
      tick();
      setInterval(tick, 60000);
      setInterval(()=>{ document.getElementById('clock').textContent = fmtClock(); }, 1000);
    });
  })();
  </script>
</body>
</html>


